<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <title> 9x9 乘法表 </title>
    <meta charset="utf-8" />
    <style>
      div {
        width: 80%;
        /* border: 1px red solid; */
        margin: 10px auto;
      }
      div#content1 {
        border: 1px red solid;
      }
      table, td, th {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th, td {
          padding: 8px 16px;
          text-align: center;
        }
      
    </style>
  </head>
  <body>
    <div id="content1"></div>
    <div id="content2"></div>
    <div id="content3"></div>

    <script>
      // Main function starts here
      var i, j, datarows = [], r1 = "";
      var columns = [1,2,3,4,5,6,7,8,9];
      
      for (i = 1; i < 10; i++) {
        var row = [];
        
        for (j = 1; j < 10; j++) {
          r1 += j + " * " + i + " = " + j * i + "\t";
          row.push(j + " * " + i + " = " + j * i);
        }
        
        r1 += "<br>";
        datarows.push(row);
      }
      
      document.getElementById("content1").innerHTML += r1;
      
      var htmlString = arr2dToHtmlTable(datarows, columns, '九九乘法表');
      document.getElementById("content2").innerHTML += htmlString;
      
      var htmlDom = arr2dToHtmlTableDom(datarows, columns, '九九乘法表');
      document.getElementById("content3").appendChild(htmlDom);
     
      /* 寫法1： Create Table with string */
      function arr2dToHtmlTable(datarows, columns, capString) {
        var tableHtml = '<table style="width: 100%;margin: 10px auto;">\n'
        var thStr = '', trStr = '';
        tableHtml += '<caption>' + capString + '</caption>';
        
        if (columns.length > 0) {
          thStr += '<tr><th>' 
          thStr += columns.join('</th><th>');
          thStr += '</th></tr>\n'
          tableHtml += thStr
        }

        for (var i = 0, rowNum = datarows.length; i < rowNum; i++) {
          trStr = '<tr><td>' // initialize a new row 
          trStr += datarows[i].join('</td><td>')
          trStr += '</td></tr>\n' // end this row
          tableHtml += trStr
        }
        
        tableHtml += '</table>\n'
        return tableHtml;
      }
      
      /* 寫法2： Create Table with DOM elements */
      function arr2dToHtmlTableDom(datarows, columns, capString){ 
        var tableDom = document.createElement('table');
        var tableCaption = document.createElement('caption');
        var captionText = document.createTextNode(capString);
        tableCaption.appendChild(captionText);
        tableDom.appendChild(tableCaption);

        // Set multiple styles in a single statement
        tableDom.style.cssText = "width: 100%; margin: 10px auto;"; 
        // tableHtml.setAttribute("style", "color:red; border: 1px solid blue;");

        if (columns.length > 0) {
          var tableTr = document.createElement('tr');
          
          for (let i = 0; i < columns.length; i++){
            var tableTh = document.createElement('th');
            var tableThContext = document.createTextNode(columns[i]);
            tableTh.appendChild(tableThContext);
            tableTr.appendChild(tableTh)
          }
          
          tableDom.appendChild(tableTr);
        }
        
        // Add data rows
        for (let i = 0, rowNum = datarows.length; i < rowNum; i++) {
          tableTr = document.createElement('tr');
          
          for (let j = 0, row = datarows[i]; j < row.length; j++){
            var tableTd = document.createElement('td');
            var tableTdContext = document.createTextNode(row[j]);
            tableTd.appendChild(tableTdContext);
            tableTr.appendChild(tableTd)
          }
          
          tableDom.appendChild(tableTr);
        }
        
        console.log(tableDom.outerHTML);
        return tableDom;
      }
    </script>
  </body>
</html>
